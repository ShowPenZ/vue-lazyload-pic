!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("classnames"),require("intersection-observer")):"function"==typeof define&&define.amd?define(["classnames","intersection-observer"],t):(e=e||self).VueLazyloadPic=t(e.ClassNames)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t={PicLazyLoad:{name:"PicLazyLoad",props:{imgLoaded:{type:Boolean,required:!0},img:{type:String,required:!0},alt:{type:String,required:!0},imgClassName:{type:String,required:!1},skeleton:{type:String,required:!1}},data:()=>({}),render(){const t=arguments[0],n=this,{imgLoaded:o,imgClassName:i,img:a,alt:s,skeleton:r}=n;return t("div",{class:"P-container"},[o?t("img",{class:e("defaultImg",i),attrs:{src:a,alt:s}}):t("div",{class:e("skeleton1",r)}),t("img",{class:"noShow",attrs:{src:a,alt:s},on:{load:()=>{n.$emit("onloads",!0)}}})])}},LazyLoadPic:{name:"LazyLoadPic",props:{imgClassName:{type:String,required:!1},imgArr:{type:Array,required:!0},imgBoxClassName:{type:String,required:!1}},data:()=>({imgBlob:[],refs:[]}),methods:{getBase64(e,t){let n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="blob",n.onload=(e=>{if(200===e.target.status){const n=e.target.response,o=new FileReader;o.onloadend=(e=>{t(e.target.result)}),o.readAsDataURL(n)}}),n.send()},callback(e){const{imgBlob:t}=this;this.imgBlob=t.concat(e)},onload(e){const t=this,n=new IntersectionObserver(e=>{e.forEach(e=>{const{target:o}=e;if(e.intersectionRatio<=0)return null;t.getBase64(o.dataset.src,t.callback),n.unobserve(o)})},{threshold:[.02]});e.map(e=>n.observe(e))}},render(){const t=arguments[0],n=this,{imgClassName:o,imgBoxClassName:i,boxClassName:a,imgArr:s,imgBlob:r}=n,d=r.length>0;let l=[],c=[];s.map((a,s)=>(n.$nextTick(()=>{c.push(n.$refs[`imgRef${s}`])}),l.push(t("div",{class:e("defaultImageBox",i),key:s},[t("img",{key:s,class:e(d?"":"L-skeleton1",o),ref:`imgRef${s}`,attrs:{src:d?r[s]:"",alt:d?a.alt:"","data-src":a.url}})]))));const f=t("div",{class:e("box",a)},[l,t("img",{on:{error:()=>n.onload(c)},attrs:{src:""}})]);return t("div",{class:"L-container"},[f])}}};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".P-container{background:#fff}.skeleton{width:100%;height:20px;background:linear-gradient(90deg,#496eaa,#944fa8,#a8804f,#496eaa);background-size:1400% 300%;position:absolute;top:10px;left:10px;animation:colorMove 20s ease infinite}.skeleton1{width:300px;height:200px;background:linear-gradient(90deg,#f2f2f2 25%,#e6e6e6 37%,#f2f2f2 63%);background-size:400% 100%;animation:ant-skeleton-loading 1.4s ease infinite}.L-skeleton1{width:300px;height:200px;background:linear-gradient(90deg,#f2f2f2 25%,#e6e6e6 37%,#f2f2f2 63%);background-size:400% 100%;animation:ant-skeleton-loading 1.4s ease infinite}.defaultImg{width:300px;height:200px}.noShow{display:none}.L-container{display:flex;justify-content:center;width:100%}.box{height:400px;overflow-y:scroll}.defaultImageBox{display:flex;justify-content:center;width:500px;height:200px;margin:20px auto}@keyframes colorMove{0%{background-position:0 0}50%{background-position:50% 100%}100%{background-position:100% 0}}@keyframes ant-skeleton-loading{0%{background-position:100% 50%}100%{background-position:0 50%}}");"undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,t,n,o,i,a,s,r,d,l){"boolean"!=typeof s&&(d=r,r=s,s=!1);const c="function"==typeof n?n.options:n;let f;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,i&&(c.functional=!0)),o&&(c._scopeId=o),a?(f=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,d(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=f):t&&(f=s?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,r(e))}),f)if(c.functional){const e=c.render;c.render=function(t,n){return f.call(n),e(t,n)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,f):[f]}return n}({},void 0,t,void 0,void 0,void 0,!1,void 0,void 0,void 0)});
//# sourceMappingURL=Lazyload.umd.min.js.map
